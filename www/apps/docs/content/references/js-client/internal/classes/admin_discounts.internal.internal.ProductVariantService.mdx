---
displayed_sidebar: jsClientSidebar
---

import ParameterTypes from "@site/src/components/ParameterTypes"

# ProductVariantService

[internal](../../admin_discounts/modules/admin_discounts.internal.mdx).[internal](../modules/admin_discounts.internal.internal.mdx).ProductVariantService

## Properties

<ParameterTypes parameters={[
  {
    "name": "__configModule__",
    "type": "Record<`string`, `unknown`\\>",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "__container__",
    "type": "`any`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "__moduleDeclaration__",
    "type": "Record<`string`, `unknown`\\>",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "cartRepository_",
    "type": "`Repository`<[`Cart`](admin_collections.internal.Cart.mdx)\\> & { `findOneWithRelations`: Method findOneWithRelations ; `findWithRelations`: Method findWithRelations  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "eventBus_",
    "type": "[`EventBusService`](admin_discounts.internal.internal.EventBusService.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "manager_",
    "type": "`EntityManager`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "moneyAmountRepository_",
    "type": "`Repository`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\\> & { `addPriceListPrices`: Method addPriceListPrices ; `createProductVariantMoneyAmounts`: Method createProductVariantMoneyAmounts ; `deletePriceListPrices`: Method deletePriceListPrices ; `deleteVariantPricesNotIn`: Method deleteVariantPricesNotIn ; `findCurrencyMoneyAmounts`: Method findCurrencyMoneyAmounts ; `findManyForVariantInPriceList`: Method findManyForVariantInPriceList ; `findManyForVariantInRegion`: Method findManyForVariantInRegion ; `findManyForVariantsInRegion`: Method findManyForVariantsInRegion ; `findRegionMoneyAmounts`: Method findRegionMoneyAmounts ; `findVariantPricesNotIn`: Method findVariantPricesNotIn ; `getPricesForVariantInRegion`: Method getPricesForVariantInRegion ; `insertBulk`: Method insertBulk ; `updatePriceListPrices`: Method updatePriceListPrices ; `upsertVariantCurrencyPrice`: Method upsertVariantCurrencyPrice  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "priceSelectionStrategy_",
    "type": "[`IPriceSelectionStrategy`](../interfaces/admin_discounts.internal.internal.IPriceSelectionStrategy.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productOptionValueRepository_",
    "type": "`Repository`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productRepository_",
    "type": "`Repository`<[`Product`](admin_collections.internal.Product.mdx)\\> & { `_applyCategoriesQuery`: Method \\_applyCategoriesQuery ; `_findWithRelations`: Method \\_findWithRelations ; `bulkAddToCollection`: Method bulkAddToCollection ; `bulkRemoveFromCollection`: Method bulkRemoveFromCollection ; `findOneWithRelations`: Method findOneWithRelations ; `findWithRelations`: Method findWithRelations ; `findWithRelationsAndCount`: Method findWithRelationsAndCount ; `getCategoryIdsFromInput`: Method getCategoryIdsFromInput ; `getCategoryIdsRecursively`: Method getCategoryIdsRecursively ; `getFreeTextSearchResultsAndCount`: Method getFreeTextSearchResultsAndCount ; `isProductInSalesChannels`: Method isProductInSalesChannels ; `queryProducts`: Method queryProducts ; `queryProductsWithIds`: Method queryProductsWithIds  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "productVariantRepository_",
    "type": "`Repository`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "regionService_",
    "type": "[`RegionService`](admin_discounts.internal.internal.RegionService.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "transactionManager_",
    "type": "`undefined` \\| `EntityManager`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.CREATED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.DELETED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "Events.UPDATED",
    "type": "`string`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

## Accessors

### activeManager\_

`Protected` `get` **activeManager_**(): `EntityManager`

#### Returns

`EntityManager`

<ParameterTypes parameters={[
  {
    "name": "EntityManager",
    "type": "`EntityManager`",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

TransactionBaseService.activeManager\_

## Methods

### addOptionValue

**addOptionValue**(`variantId`, `optionId`, `optionValue`): `Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\>

Adds option value to a variant.
Fails when product with variant does not exist or
if that product does not have an option with the given
option id. Fails if given variant is not found.
Option value must be of type string or number.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the variant to decorate.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionId",
    "type": "`string`",
    "description": "the option from product.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionValue",
    "type": "`string`",
    "description": "option value to add.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the update operation.",
    "children": [
      {
        "name": "ProductOptionValue",
        "type": "[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### atomicPhase\_

`Protected` **atomicPhase_**<`TResult`, `TError`\>(`work`, `isolationOrErrorHandler?`, `maybeErrorHandlerOrDontFail?`): `Promise`<`TResult`\>

Wraps some work within a transactional block. If the service already has
a transaction manager attached this will be reused, otherwise a new
transaction manager is created.

<ParameterTypes parameters={[
  {
    "name": "TResult",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "TError",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "work",
    "type": "(`transactionManager`: `EntityManager`) => `Promise`<`TResult`\\>",
    "description": "the transactional work to be done",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "isolationOrErrorHandler",
    "type": "`IsolationLevel` \\| (`error`: `TError`) => `Promise`<`void` \\| `TResult`\\>",
    "description": "the isolation level to be used for the work.",
    "optional": true,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "maybeErrorHandlerOrDontFail",
    "type": "(`error`: `TError`) => `Promise`<`void` \\| `TResult`\\>",
    "description": "Potential error handler",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`TResult`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`TResult`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the transactional work",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[atomicPhase_](admin_discounts.internal.internal.TransactionBaseService.mdx#atomicphase_)

___

### create

**create**<`TVariants`, `TOutput`\>(`productOrProductId`, `variants`): `Promise`<`TOutput`\>

Creates an unpublished product variant. Will validate against parent product
to ensure that the variant can in fact be created.

<ParameterTypes parameters={[
  {
    "name": "TVariants",
    "type": "[`CreateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductvariantinput) \\| [`CreateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductvariantinput)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "TOutput",
    "type": "`object`",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "productOrProductId",
    "type": "`string` \\| [`Product`](admin_collections.internal.Product.mdx)",
    "description": "the product the variant will be added to",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "variants",
    "type": "[`CreateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductvariantinput) \\| [`CreateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductvariantinput)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`TOutput`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`TOutput`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "resolves to the creation result.",
    "children": []
  }
]} />

___

### delete

**delete**(`variantIds`): `Promise`<`void`\>

Deletes variant or variants.
Will never fail due to delete being idempotent.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantIds",
    "type": "`string` \\| `string`[]",
    "description": "the id of the variant to delete. Must be castable as an ObjectId",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "empty promise",
    "children": []
  }
]} />

___

### deleteOptionValue

**deleteOptionValue**(`variantId`, `optionId`): `Promise`<`void`\>

Deletes option value from given variant.
Will never fail due to delete being idempotent.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the variant to decorate.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionId",
    "type": "`string`",
    "description": "the option from product.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "empty promise",
    "children": []
  }
]} />

___

### getFreeTextQueryBuilder\_

**getFreeTextQueryBuilder_**(`variantRepo`, `query`, `q?`): `SelectQueryBuilder`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

Lists variants based on the provided parameters and includes the count of
variants that match the query.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantRepo",
    "type": "`Repository`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "description": "the variant repository",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "query",
    "type": "[`FindWithRelationsOptions`](../../admin_discounts/modules/admin_discounts.internal.mdx#findwithrelationsoptions)",
    "description": "object that defines the scope for what should be returned",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "q",
    "type": "`string`",
    "description": "free text query",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`SelectQueryBuilder`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "SelectQueryBuilder",
    "type": "`SelectQueryBuilder`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "an array containing the products as the first element and the total\n  count of products that matches the query as the second element.",
    "children": [
      {
        "name": "ProductVariant",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### getRegionPrice

**getRegionPrice**(`variantId`, `context`): `Promise`<``null`` \| `number`\>

Gets the price specific to a region. If no region specific money amount
exists the function will try to use a currency price. If no default
currency price exists the function will throw an error.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the id of the variant to get price from",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "context",
    "type": "[`GetRegionPriceContext`](../../admin_discounts/modules/admin_discounts.internal.mdx#getregionpricecontext)",
    "description": "context for getting region price",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<``null`` \| `number`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<``null`` \\| `number`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the price specific to the region",
    "children": [
      {
        "name": "``null`` \\| number",
        "type": "``null`` \\| `number`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### isVariantInSalesChannels

**isVariantInSalesChannels**(`id`, `salesChannelIds`): `Promise`<`boolean`\>

Check if the variant is assigned to at least one of the provided sales channels.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "id",
    "type": "`string`",
    "description": "product variant id",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "salesChannelIds",
    "type": "`string`[]",
    "description": "an array of sales channel ids",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`boolean`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`boolean`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "boolean",
        "type": "`boolean`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### list

**list**(`selector`, `config?`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`FilterableProductVariantProps`](admin_discounts.internal.FilterableProductVariantProps.mdx)",
    "description": "the query object for find",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindConfig`](../interfaces/admin_discounts.internal.internal.FindConfig.mdx)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\> & [`PriceSelectionContext`](../modules/admin_discounts.internal.internal.mdx#priceselectioncontext)",
    "description": "query config object for variant retrieval",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find operation",
    "children": [
      {
        "name": "ProductVariant[]",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductVariant",
            "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### listAndCount

**listAndCount**(`selector`, `config?`): `Promise`<[[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[], `number`]\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "selector",
    "type": "[`FilterableProductVariantProps`](admin_discounts.internal.FilterableProductVariantProps.mdx)",
    "description": "the query object for find",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindConfig`](../interfaces/admin_discounts.internal.internal.FindConfig.mdx)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\> & [`PriceSelectionContext`](../modules/admin_discounts.internal.internal.mdx#priceselectioncontext)",
    "description": "query config object for variant retrieval",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[], `number`]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[], `number`]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the find operation",
    "children": [
      {
        "name": "ProductVariant[]",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      },
      {
        "name": "number",
        "type": "`number`",
        "optional": true,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieve

**retrieve**(`variantId`, `config?`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

Gets a product variant by id.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the id of the product to get.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindConfig`](../interfaces/admin_discounts.internal.internal.FindConfig.mdx)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\> & [`PriceSelectionContext`](../modules/admin_discounts.internal.internal.mdx#priceselectioncontext)",
    "description": "query config object for variant retrieval.",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the product document.",
    "children": [
      {
        "name": "ProductVariant",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### retrieveBySKU

**retrieveBySKU**(`sku`, `config?`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

Gets a product variant by id.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "sku",
    "type": "`string`",
    "description": "The unique stock keeping unit used to identify the product variant.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "config",
    "type": "[`FindConfig`](../interfaces/admin_discounts.internal.internal.FindConfig.mdx)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\> & [`PriceSelectionContext`](../modules/admin_discounts.internal.internal.mdx#priceselectioncontext)",
    "description": "query config object for variant retrieval.",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the product document.",
    "children": [
      {
        "name": "ProductVariant",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### setCurrencyPrice

**setCurrencyPrice**(`variantId`, `price`): `Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the id of the variant to set prices for",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "price",
    "type": "[`ProductVariantPrice`](../../admin_discounts/modules/admin_discounts.internal.mdx#productvariantprice)",
    "description": "the price for the variant",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the update operation",
    "children": [
      {
        "name": "MoneyAmount",
        "type": "[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

#### Deprecated

use addOrUpdateCurrencyPrices instead
Sets the default price for the given currency.

___

### setRegionPrice

**setRegionPrice**(`variantId`, `price`): `Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the id of the variant to update",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "price",
    "type": "[`ProductVariantPrice`](../../admin_discounts/modules/admin_discounts.internal.mdx#productvariantprice)",
    "description": "the price for the variant.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the update operation",
    "children": [
      {
        "name": "MoneyAmount",
        "type": "[`MoneyAmount`](admin_collections.internal.MoneyAmount.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

#### Deprecated

use addOrUpdateRegionPrices instead
Sets the default price of a specific region

___

### shouldRetryTransaction\_

`Protected` **shouldRetryTransaction_**(`err`): `boolean`

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "err",
    "type": "Record<`string`, `unknown`\\> \\| { `code`: `string`  }",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`boolean`

<ParameterTypes parameters={[
  {
    "name": "boolean",
    "type": "`boolean`",
    "optional": true,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[shouldRetryTransaction_](admin_discounts.internal.internal.TransactionBaseService.mdx#shouldretrytransaction_)

___

### update

**update**(`variantData`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

Updates a collection of variant.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantData",
    "type": "{ `updateData`: [`UpdateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#updateproductvariantinput) ; `variant`: [`ProductVariant`](admin_collections.internal.ProductVariant.mdx)  }[]",
    "description": "a collection of variant and the data to update.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "resolves to the update result.",
    "children": [
      {
        "name": "ProductVariant[]",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductVariant",
            "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

**update**(`variantOrVariantId`, `update`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

Updates a variant.
Price updates should use dedicated methods.
The function will throw, if price updates are attempted.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantOrVariantId",
    "type": "`string` \\| [`Partial`](../../admin_discounts/modules/admin_discounts.internal.mdx#partial)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "description": "variant or id of a variant.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "update",
    "type": "[`UpdateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#updateproductvariantinput)",
    "description": "an object with the update values.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "resolves to the update result.",
    "children": [
      {
        "name": "ProductVariant",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

**update**(`variantOrVariantId`, `update`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantOrVariantId",
    "type": "`string` \\| [`Partial`](../../admin_discounts/modules/admin_discounts.internal.mdx#partial)<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "update",
    "type": "[`UpdateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#updateproductvariantinput)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "ProductVariant",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### updateBatch

`Protected` **updateBatch**(`variantData`): `Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantData",
    "type": "[`UpdateProductVariantData`](../../admin_discounts/modules/admin_discounts.internal.mdx#updateproductvariantdata)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": [
      {
        "name": "ProductVariant[]",
        "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)[]",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": [
          {
            "name": "ProductVariant",
            "type": "[`ProductVariant`](admin_collections.internal.ProductVariant.mdx)",
            "optional": false,
            "defaultValue": "",
            "description": "",
            "children": []
          }
        ]
      }
    ]
  }
]} />

___

### updateOptionValue

**updateOptionValue**(`variantId`, `optionId`, `optionValue`): `Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\>

Updates variant's option value.
Option value must be of type string or number.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the variant to decorate.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionId",
    "type": "`string`",
    "description": "the option from product.",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "optionValue",
    "type": "`string`",
    "description": "option value to add.",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)\\>",
    "optional": false,
    "defaultValue": "",
    "description": "the result of the update operation.",
    "children": [
      {
        "name": "ProductOptionValue",
        "type": "[`ProductOptionValue`](admin_collections.internal.ProductOptionValue.mdx)",
        "optional": false,
        "defaultValue": "",
        "description": "",
        "children": []
      }
    ]
  }
]} />

___

### updateVariantPrices

**updateVariantPrices**(`data`): `Promise`<`void`\>

Updates variant/prices collection.
Deletes any prices that are not in the update object, and is not associated with a price list.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "data",
    "type": "[`UpdateVariantPricesData`](../../admin_discounts/modules/admin_discounts.internal.mdx#updatevariantpricesdata)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "empty promise",
    "children": []
  }
]} />

**updateVariantPrices**(`variantId`, `prices`): `Promise`<`void`\>

Updates a variant's prices.
Deletes any prices that are not in the update object, and is not associated with a price list.

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "variantId",
    "type": "`string`",
    "description": "the id of variant",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "prices",
    "type": "[`ProductVariantPrice`](../../admin_discounts/modules/admin_discounts.internal.mdx#productvariantprice)[]",
    "description": "the update prices",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "empty promise",
    "children": []
  }
]} />

___

### updateVariantPricesBatch

`Protected` **updateVariantPricesBatch**(`data`): `Promise`<`void`\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "data",
    "type": "[`UpdateVariantPricesData`](../../admin_discounts/modules/admin_discounts.internal.mdx#updatevariantpricesdata)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

___

### upsertCurrencyPrices

**upsertCurrencyPrices**(`data`): `Promise`<`void`\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "data",
    "type": "{ `price`: [`WithRequiredProperty`](../modules/admin_discounts.internal.internal.mdx#withrequiredproperty)<[`ProductVariantPrice`](../../admin_discounts/modules/admin_discounts.internal.mdx#productvariantprice), ``\"currency_code\"``\\> ; `variantId`: `string`  }[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

___

### upsertRegionPrices

**upsertRegionPrices**(`data`): `Promise`<`void`\>

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "data",
    "type": "[`UpdateVariantRegionPriceData`](../../admin_discounts/modules/admin_discounts.internal.mdx#updatevariantregionpricedata)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`Promise`<`void`\>

<ParameterTypes parameters={[
  {
    "name": "Promise",
    "type": "`Promise`<`void`\\>",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

___

### validateVariantsToCreate\_

`Protected` **validateVariantsToCreate_**(`product`, `variants`): `void`

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "product",
    "type": "[`Product`](admin_collections.internal.Product.mdx)",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  },
  {
    "name": "variants",
    "type": "[`CreateProductVariantInput`](../../admin_discounts/modules/admin_discounts.internal.mdx#createproductvariantinput)[]",
    "description": "",
    "optional": false,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

`void`

<ParameterTypes parameters={[
  {
    "name": "void",
    "type": "`void`",
    "optional": true,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

___

### withTransaction

**withTransaction**(`transactionManager?`): [`ProductVariantService`](admin_discounts.internal.internal.ProductVariantService.mdx)

#### Parameters

<ParameterTypes parameters={[
  {
    "name": "transactionManager",
    "type": "`EntityManager`",
    "description": "",
    "optional": true,
    "defaultValue": "",
    "children": []
  }
]} />

#### Returns

[`ProductVariantService`](admin_discounts.internal.internal.ProductVariantService.mdx)

<ParameterTypes parameters={[
  {
    "name": "ProductVariantService",
    "type": "[`ProductVariantService`](admin_discounts.internal.internal.ProductVariantService.mdx)",
    "optional": false,
    "defaultValue": "",
    "description": "",
    "children": []
  }
]} />

#### Inherited from

[TransactionBaseService](admin_discounts.internal.internal.TransactionBaseService.mdx).[withTransaction](admin_discounts.internal.internal.TransactionBaseService.mdx#withtransaction)

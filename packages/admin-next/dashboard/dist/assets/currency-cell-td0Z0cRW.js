var Ye=Object.defineProperty;var Je=(n,o,e)=>o in n?Ye(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e;var pe=(n,o,e)=>(Je(n,typeof o!="symbol"?o+"":o,e),e);import{j as y,d as Qe,S as Te}from"./index-S--WvUSo.js";import{u as Xe,g as Ze,f as Re,T as ce}from"./index-JDlOzmVl.js";import{r as h,a as ze}from"./react-PzSkSLoa.js";import{r as et}from"./react-dom-Og6--24v.js";import{C as tt}from"./form-0PHaH8g8.js";/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function we(){return we=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},we.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ye(){return ye=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},ye.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ge(n,o,e){var t,r=(t=e.initialDeps)!=null?t:[],a;return function(){var i;e.key&&e.debug!=null&&e.debug()&&(i=Date.now());var s=n(),l=s.length!==r.length||s.some(function(x,v){return r[v]!==x});if(!l)return a;r=s;var g;if(e.key&&e.debug!=null&&e.debug()&&(g=Date.now()),a=o.apply(void 0,s),e.key&&e.debug!=null&&e.debug()){var p=Math.round((Date.now()-i)*100)/100,f=Math.round((Date.now()-g)*100)/100,w=f/16,M=function(v,E){for(v=String(v);v.length<E;)v=" "+v;return v};console.info("%câ± "+M(f,5)+" /"+M(p,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*w,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(a),a}}function Ce(n,o){if(n===void 0)throw new Error("Unexpected undefined"+(o?": "+o:""));return n}var nt=function(o,e){return Math.abs(o-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rt=function(o){return o},at=function(o){for(var e=Math.max(o.startIndex-o.overscan,0),t=Math.min(o.endIndex+o.overscan,o.count-1),r=[],a=e;a<=t;a++)r.push(a);return r},ot=function(o,e){var t=o.scrollElement;if(t){var r=function(s){var l=s.width,g=s.height;e({width:Math.round(l),height:Math.round(g)})};r(t.getBoundingClientRect());var a=new ResizeObserver(function(i){var s=i[0];if(s!=null&&s.borderBoxSize){var l=s.borderBoxSize[0];if(l){r({width:l.inlineSize,height:l.blockSize});return}}r(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),function(){a.unobserve(t)}}},it=function(o,e){var t=o.scrollElement;if(t){var r=function(){e(t[o.options.horizontal?"scrollLeft":"scrollTop"])};return r(),t.addEventListener("scroll",r,{passive:!0}),function(){t.removeEventListener("scroll",r)}}},st=function(o,e,t){if(e!=null&&e.borderBoxSize){var r=e.borderBoxSize[0];if(r){var a=Math.round(r[t.options.horizontal?"inlineSize":"blockSize"]);return a}}return Math.round(o.getBoundingClientRect()[t.options.horizontal?"width":"height"])},lt=function(o,e,t){var r,a,i=e.adjustments,s=i===void 0?0:i,l=e.behavior,g=o+s;(r=t.scrollElement)==null||r.scrollTo==null||r.scrollTo((a={},a[t.options.horizontal?"left":"top"]=g,a.behavior=l,a))},ut=function(o){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var t=null,r=function(){return t||(typeof ResizeObserver<"u"?t=new ResizeObserver(function(i){i.forEach(function(s){e._measureElement(s.target,s)})}):null)};return{disconnect:function(){var i;return(i=r())==null?void 0:i.disconnect()},observe:function(i){var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:function(i){var s;return(s=r())==null?void 0:s.unobserve(i)}}}(),this.range=null,this.setOptions=function(t){Object.entries(t).forEach(function(r){var a=r[0],i=r[1];typeof i>"u"&&delete t[a]}),e.options=ye({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:rt,rangeExtractor:at,onChange:function(){},measureElement:st,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},t)},this.notify=function(t){e.options.onChange==null||e.options.onChange(e,t)},this.maybeNotify=ge(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(t){e.notify(t)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(t){return t()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var t=e.options.getScrollElement();e.scrollElement!==t&&(e.cleanup(),e.scrollElement=t,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(r){e.scrollRect=r,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(r){e.scrollAdjustments=0,e.scrollOffset!==r&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<r?"forward":"backward",e.scrollOffset=r,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=ge(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(t,r,a,i){return e.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:a,getItemKey:i}},{key:!1}),this.getFurthestMeasurement=function(t,r){for(var a=new Map,i=new Map,s=r-1;s>=0;s--){var l=t[s];if(!a.has(l.lane)){var g=i.get(l.lane);if(g==null||l.end>g.end?i.set(l.lane,l):l.end<g.end&&a.set(l.lane,!0),a.size===e.options.lanes)break}}return i.size===e.options.lanes?Array.from(i.values()).sort(function(p,f){return p.end-f.end})[0]:void 0},this.getMeasurements=ge(function(){return[e.memoOptions(),e.itemSizeCache]},function(t,r){var a=t.count,i=t.paddingStart,s=t.scrollMargin,l=t.getItemKey,g=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var p=e.measurementsCache.slice(0,g),f=g;f<a;f++){var w=l(f),M=e.options.lanes===1?p[f-1]:e.getFurthestMeasurement(p,f),x=M?M.end:i+s,v=r.get(w),E=typeof v=="number"?v:e.options.estimateSize(f),m=x+E,R=M?M.lane:f%e.options.lanes;p[f]={index:f,start:x,size:E,end:m,key:w,lane:R}}return e.measurementsCache=p,p},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=ge(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(t,r,a){return e.range=t.length>0&&r>0?ct({measurements:t,outerSize:r,scrollOffset:a}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=ge(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(t,r,a,i){return r===null?[]:t(ye({},r,{overscan:a,count:i}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(t){var r=e.options.indexAttribute,a=t.getAttribute(r);return a?parseInt(a,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(t,r){var a=e.measurementsCache[e.indexFromElement(t)];if(!a||!t.isConnected){e.measureElementCache.forEach(function(l,g){l===t&&(e.observer.unobserve(t),e.measureElementCache.delete(g))});return}var i=e.measureElementCache.get(a.key);i!==t&&(i&&e.observer.unobserve(i),e.observer.observe(t),e.measureElementCache.set(a.key,t));var s=e.options.measureElement(t,r,e);e.resizeItem(a,s)},this.resizeItem=function(t,r){var a,i=(a=e.itemSizeCache.get(t.key))!=null?a:t.size,s=r-i;s!==0&&(t.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=s,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(t.index),e.itemSizeCache=new Map(e.itemSizeCache.set(t.key,r)),e.notify(!1))},this.measureElement=function(t){t&&e._measureElement(t,void 0)},this.getVirtualItems=ge(function(){return[e.getIndexes(),e.getMeasurements()]},function(t,r){for(var a=[],i=0,s=t.length;i<s;i++){var l=t[i],g=r[l];a.push(g)}return a},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(t){var r=e.getMeasurements();return Ce(r[Ne(0,r.length-1,function(a){return Ce(r[a]).start},t)])},this.getOffsetForAlignment=function(t,r){var a=e.getSize();r==="auto"&&(t<=e.scrollOffset?r="start":t>=e.scrollOffset+a?r="end":r="start"),r==="start"?t=t:r==="end"?t=t-a:r==="center"&&(t=t-a/2);var i=e.options.horizontal?"scrollWidth":"scrollHeight",s=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[i]:e.scrollElement[i]:0,l=s-e.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=function(t,r){r===void 0&&(r="auto"),t=Math.max(0,Math.min(t,e.options.count-1));var a=Ce(e.getMeasurements()[t]);if(r==="auto")if(a.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)r="end";else if(a.start<=e.scrollOffset+e.options.scrollPaddingStart)r="start";else return[e.scrollOffset,r];var i=r==="end"?a.end+e.options.scrollPaddingEnd:a.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(i,r),r]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(t,r){var a=r===void 0?{}:r,i=a.align,s=i===void 0?"start":i,l=a.behavior;e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(t,r){var a=r===void 0?{}:r,i=a.align,s=i===void 0?"auto":i,l=a.behavior;t=Math.max(0,Math.min(t,e.options.count-1)),e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var g=e.getOffsetForIndex(t,s),p=g[0],f=g[1];e._scrollToOffset(p,{adjustments:void 0,behavior:l}),l!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var w=e.measureElementCache.has(e.options.getItemKey(t));if(w){var M=e.getOffsetForIndex(t,f),x=M[0];nt(x,e.scrollOffset)||e.scrollToIndex(t,{align:f,behavior:l})}else e.scrollToIndex(t,{align:f,behavior:l})}))},this.scrollBy=function(t,r){var a=r===void 0?{}:r,i=a.behavior;e.cancelScrollToIndex(),i==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+t,{adjustments:void 0,behavior:i})},this.getTotalSize=function(){var t;return(((t=e.getMeasurements()[e.options.count-1])==null?void 0:t.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(t,r){var a=r.adjustments,i=r.behavior;e.options.scrollToFn(t,{behavior:i,adjustments:a},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(o),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(t){e.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()},Ne=function(o,e,t,r){for(;o<=e;){var a=(o+e)/2|0,i=t(a);if(i<r)o=a+1;else if(i>r)e=a-1;else return a}return o>0?o-1:0};function ct(n){for(var o=n.measurements,e=n.outerSize,t=n.scrollOffset,r=o.length-1,a=function(g){return o[g].start},i=Ne(0,r,a,t),s=i;s<r&&o[s].end<t+e;)s++;return{startIndex:i,endIndex:s}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ft=typeof document<"u"?h.useLayoutEffect:h.useEffect;function dt(n){var o=h.useReducer(function(){return{}},{})[1],e=we({},n,{onChange:function(i,s){s?et.flushSync(o):o(),n.onChange==null||n.onChange(i,s)}}),t=h.useState(function(){return new ut(e)}),r=t[0];return r.setOptions(e),h.useEffect(function(){return r._didMount()},[]),ft(function(){return r._willUpdate()}),r}function mt(n){return dt(we({observeElementRect:ot,observeElementOffset:it,scrollToFn:lt},n))}const gt=(n=20)=>{const[o,e]=h.useState([]),[t,r]=h.useState([]),a=o.length>0,i=t.length>0,s=h.useCallback(()=>{if(!a)return;const p=o[o.length-1],f=o.slice(0,o.length-1);p.undo(),e(f),r([p,...t.slice(0,n-1)])},[a,t,o,n]),l=h.useCallback(()=>{if(!i)return;const p=t[0],f=t.slice(1);p.redo(),e([...o,p].slice(0,n-1)),r(f)},[i,t,o,n]),g=h.useCallback(p=>{p.execute(),e(f=>[...f,p].slice(0,n-1)),r([])},[n]);return{undo:s,redo:l,execute:g,canUndo:a,canRedo:i}};var ke=(n=>(n.VOID="void",n.READONLY="readonly",n.EDITABLE="editable",n.OVERLAY="overlay",n))(ke||{});const vt=["void","readonly"],ht=40,pt=({data:n=[],columns:o,state:e,getSubRows:t})=>{const r=h.useRef(null),{execute:a,undo:i,redo:s,canRedo:l,canUndo:g}=gt(),{register:p,control:f,getValues:w,setValue:M}=e,x=Xe({data:n,columns:o,getSubRows:t,getCoreRowModel:Ze(),meta:{register:p,control:f}}),{flatRows:v}=x.getRowModel(),E=mt({count:v.length,estimateSize:()=>ht,getScrollElement:()=>r.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?u=>u==null?void 0:u.getBoundingClientRect().height:void 0,overscan:5}),[m,R]=h.useState(null),[z,q]=h.useState(!1),[K,$]=h.useState([]),[V,ie]=h.useState(!1),[H,J]=h.useState([]),W=u=>{const d=u.querySelector("[data-field-id]");d instanceof HTMLInputElement&&requestAnimationFrame(()=>{d.focus(),d.setSelectionRange(d.value.length,d.value.length)})},Q=()=>{const u=document.activeElement;m&&u instanceof HTMLElement&&u.blur()},se=u=>{const d=u.getAttribute("data-cell-type");return d?vt.includes(d):!0},X=u=>{u.stopPropagation(),u.preventDefault();const d=u.target;if(d instanceof HTMLElement&&se(d))return;const c=parseInt(u.currentTarget.dataset.rowIndex),b=parseInt(u.currentTarget.dataset.columnIndex),C=le(c,b);if(u.detail===2||C){W(u.currentTarget);return}else Q();const k={row:c,column:b};$([k]),R(k),q(!0)},Z=u=>{u.stopPropagation(),ie(!0)},le=(u,d)=>(m==null?void 0:m.row)===u&&(m==null?void 0:m.column)===d,ee=u=>{if(!z&&!V||!m)return;const d=u.target;if(d instanceof HTMLElement&&se(d))return;const c=parseInt(u.currentTarget.dataset.rowIndex),b=parseInt(u.currentTarget.dataset.columnIndex);if((m==null?void 0:m.column)!==b)return;const C=c>m.row?"down":c<m.row?"up":"none",k=K[K.length-1]??m;if(Math.abs(c-k.row)===1){if(z){$(D=>D.filter(I=>C==="down"?I.row<=c&&I.row>=m.row||I.row===m.row:C==="up"&&I.row>=c&&I.row<=m.row||I.row===m.row).concat({row:c,column:b}));return}if(V){if(m.row===c)return;J(D=>D.filter(I=>C==="down"?I.row<=c&&I.row>=m.row||I.row===m.row:C==="up"&&I.row>=c&&I.row<=m.row||I.row===m.row).concat({row:c,column:b}));return}}let ae=[];function me(D,I){var he;const ve=(he=r.current)==null?void 0:he.querySelector(`[data-row-index="${D}"][data-column-index="${I}"]`);!ve||ve.querySelector("[data-role=presentation]")||ae.push({row:D,column:I})}if(C==="down")for(let D=m.row;D<=c;D++)me(D,b);if(C==="up")for(let D=m.row;D>=c;D--)me(D,b);if(z){$(ae);return}if(V){ae=ae.filter(D=>D.row!==m.row),J(ae);return}},te=(u,d)=>H.some(c=>c.row===u&&c.column===d),fe=(u,d)=>K.some(c=>c.row===u&&c.column===d),N=h.useCallback(u=>u.map(d=>{var b;const c=document.querySelector(`[data-row-index="${d.row}"][data-column-index="${d.column}"]`);return(b=c==null?void 0:c.querySelector("[data-field-id]"))==null?void 0:b.getAttribute("data-field-id")}).filter(Boolean),[]),Y=h.useCallback(u=>u.map(c=>w(c)).map(c=>JSON.stringify(c)),[w]),de=h.useCallback((u,d)=>{u.forEach((c,b)=>{const C=d[b];C&&M(c,JSON.parse(C),{shouldDirty:!0,shouldTouch:!0})})},[M]),ne=h.useCallback(u=>{var C;if(K.length===0)return;const d=N(K),b=Y(d).join(`
`);(C=u.clipboardData)==null||C.setData("text/plain",b),u.preventDefault()},[K,N,Y]),O=h.useCallback(u=>{var U;const d=(U=u.clipboardData)==null?void 0:U.getData("text/plain");if(!d)return;const c=N(K),b=Y(c),C=d.split(`
`),k=new Ve({next:C,prev:b,selection:c,setter:de});a(k)},[K,a,Y,de,N]),B=h.useCallback(u=>{!l&&!g||(u.key.toLowerCase()==="z"&&u.metaKey&&!u.shiftKey&&(console.log(g),u.preventDefault(),i()),u.key.toLowerCase()==="z"&&u.metaKey&&u.shiftKey&&(u.preventDefault(),s()))},[i,s,l,g]),re=h.useCallback(()=>{var U;if(!m)return;const u=N(H),d=N([m]),c=(U=Y(d))==null?void 0:U[0],b=Y(u),C=b.map(()=>c),k=new Ve({next:C,prev:b,selection:u,setter:de});a(k),$(H),J([]),ie(!1)},[m,N,H,Y,de,a]),ue=h.useCallback(u=>{if(z){q(!1);return}if(V){re();return}},[V,z,re]);return h.useEffect(()=>(document.addEventListener("mouseup",ue),document.addEventListener("copy",ne),document.addEventListener("paste",O),document.addEventListener("keydown",B),()=>{document.removeEventListener("mouseup",ue),document.removeEventListener("copy",ne),document.removeEventListener("paste",O),document.removeEventListener("keydown",B)}),[ue,ne,O,B]),y.jsx("div",{className:"bg-ui-bg-subtle size-full overflow-hidden",children:y.jsx("div",{ref:r,style:{overflow:"auto",position:"relative",height:"100%",userSelect:z||V?"none":"auto"},children:y.jsxs("table",{className:"text-ui-fg-subtle grid",children:[y.jsx("thead",{className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:x.getHeaderGroups().map(u=>y.jsx("tr",{className:"flex h-10 w-full",children:u.headers.map(d=>y.jsx("th",{style:{width:d.getSize()},className:"bg-ui-bg-base flex items-center border-b border-r px-4 py-2.5",children:Re(d.column.columnDef.header,d.getContext())},d.id))},u.id))}),y.jsx("tbody",{className:"relative grid",style:{height:`${E.getTotalSize()}px`},children:E.getVirtualItems().map(u=>{const d=v[u.index];return y.jsx("tr",{"data-index":u.index,ref:c=>E.measureElement(c),style:{transform:`translateY(${u.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:d.getVisibleCells().map((c,b)=>{const C=le(u.index,b),k=fe(u.index,b),U=te(u.index,b);return y.jsx("td",{style:{width:c.column.getSize()},onMouseDown:X,onMouseOver:ee,"data-row-index":u.index,"data-column-index":b,className:Qe("bg-ui-bg-base has-[[data-role='presentation']]:bg-ui-bg-subtle relative flex items-center border-b border-r p-0 outline-none","after:transition-fg after:border-ui-fg-interactive after:pointer-events-none after:invisible after:absolute after:-bottom-px after:-left-px after:-right-px after:-top-px after:box-border after:border-[2px] after:content-['']",{"after:visible":C,"bg-ui-bg-highlight focus-within:bg-ui-bg-base":k||C,"bg-ui-bg-base-hover":U}),tabIndex:-1,children:y.jsxs("div",{className:"relative h-full w-full",children:[Re(c.column.columnDef.cell,c.getContext()),C&&y.jsx("div",{onMouseDown:Z,className:"bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize"})]})},c.id)})},d.id)})})]})})})};class Ve{constructor({selection:o,setter:e,prev:t,next:r}){pe(this,"_selection");pe(this,"_prev");pe(this,"_next");pe(this,"_setter");this._selection=o,this._setter=e,this._prev=t,this._next=r}execute(){this._setter(this._selection,this._next)}undo(){this._setter(this._selection,this._prev)}redo(){this.execute()}}const bt=({columns:n,rowCount:o})=>{const e=Array.from({length:o},(a,i)=>i),r=100/n.length;return y.jsxs(ce,{children:[y.jsx(ce.Header,{children:y.jsx(ce.Row,{children:n.map((a,i)=>y.jsx(ce.HeaderCell,{style:{width:`${r}%`},children:y.jsx(Te,{className:"h-7"})},i))})}),y.jsx(ce.Body,{children:e.map((a,i)=>y.jsx(ce.Row,{children:n.map((s,l)=>y.jsx(ce.Cell,{children:y.jsx(Te,{className:"h-7"})},l))},i))})]})},Ft=({isLoading:n,...o})=>n?y.jsx(bt,{columns:o.columns,rowCount:10}):y.jsx(pt,{...o});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=function(){return S=Object.assign||function(o){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a])}return o},S.apply(this,arguments)};function xt(n,o){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&o.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e}function P(n,o,e){if(e||arguments.length===2)for(var t=0,r=o.length,a;t<r;t++)(a||!(t in o))&&(a||(a=Array.prototype.slice.call(o,0,t)),a[t]=o[t]);return n.concat(a||o)}var G=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},St={k:1e3,m:1e6,b:1e9},wt=function(n,o){o===void 0&&(o=".");var e=new RegExp("(\\d+("+G(o)+"\\d*)?)([kmb])$","i"),t=n.match(e);if(t){var r=t[1],a=t[3],i=St[a.toLowerCase()];return Number(r.replace(o,"."))*i}},yt=function(n,o){o===void 0&&(o=",");var e=new RegExp(G(o),"g");return n.replace(e,"")},Et=function(n,o){var e=G(o.join("")),t=new RegExp("[^\\d"+e+"]","gi");return n.replace(t,"")},Ie=function(n){var o=n.value,e=n.groupSeparator,t=e===void 0?",":e,r=n.decimalSeparator,a=r===void 0?".":r,i=n.allowDecimals,s=i===void 0?!0:i,l=n.decimalsLimit,g=l===void 0?2:l,p=n.allowNegativeValue,f=p===void 0?!0:p,w=n.disableAbbreviations,M=w===void 0?!1:w,x=n.prefix,v=x===void 0?"":x,E=n.transformRawValue,m=E===void 0?function(N){return N}:E,R=m(o);if(R==="-")return R;var z=M?[]:["k","m","b"],q=new RegExp("((^|\\D)-\\d)|(-"+G(v)+")"),K=q.test(R),$=RegExp("(\\d+)-?"+G(v)).exec(o)||[],V=$[0],ie=$[1],H=v?V?R.replace(V,"").concat(ie):R.replace(v,""):R,J=yt(H,t),W=Et(J,P([t,a],z)),Q=W;if(!M){if(z.some(function(N){return N===W.toLowerCase().replace(a,"")}))return"";var se=wt(W,a);se&&(Q=String(se))}var X=K&&f?"-":"";if(a&&Q.includes(a)){var Z=W.split(a),le=Z[0],ee=Z[1],te=g&&ee?ee.slice(0,g):ee,fe=s?""+a+te:"";return""+X+le+fe}return""+X+Q},Ct=function(n,o,e){if(e&&n.length>1){if(n.includes(o)){var t=n.split(o),r=t[0],a=t[1];if(a.length>e)return""+r+o+a.slice(0,e)}var i=n.length>e?new RegExp("(\\d+)(\\d{"+e+"})"):new RegExp("(\\d)(\\d+)"),s=n.match(i);if(s){var r=s[1],a=s[2];return""+r+o+a}}return n},Ae=function(n,o){var e=o.groupSeparator,t=e===void 0?",":e,r=o.decimalSeparator,a=r===void 0?".":r,i=new RegExp("\\d([^"+G(t)+G(a)+"0-9]+)"),s=n.match(i);return s?s[1]:void 0},be=function(n){var o=n.value,e=n.decimalSeparator,t=n.intlConfig,r=n.decimalScale,a=n.prefix,i=a===void 0?"":a,s=n.suffix,l=s===void 0?"":s;if(o===""||o===void 0)return"";if(o==="-")return"-";var g=new RegExp("^\\d?-"+(i?G(i)+"?":"")+"\\d").test(o),p=e!=="."?It(o,e,g):o,f={minimumFractionDigits:r||0,maximumFractionDigits:20},w=t?new Intl.NumberFormat(t.locale,t.currency?S(S({},f),{style:"currency",currency:t.currency}):f):new Intl.NumberFormat(void 0,f),M=w.formatToParts(Number(p)),x=Ot(M,n),v=Ae(x,S({},n)),E=o.slice(-1)===e?e:"",m=p.match(RegExp("\\d+\\.(\\d+)"))||[],R=m[1];return r===void 0&&R&&e&&(x.includes(e)?x=x.replace(RegExp("(\\d+)("+G(e)+")(\\d+)","g"),"$1$2"+R):v&&!l?x=x.replace(v,""+e+R+v):x=""+x+e+R),l&&E?""+x+E+l:v&&E?x.replace(v,""+E+v):v&&l?x.replace(v,""+E+l):[x,E,l].join("")},It=function(n,o,e){var t=n;return o&&o!=="."&&(t=t.replace(RegExp(G(o),"g"),"."),e&&o==="-"&&(t="-"+t.slice(1))),t},Ot=function(n,o){var e=o.prefix,t=o.groupSeparator,r=o.decimalSeparator,a=o.decimalScale,i=o.disableGroupSeparators,s=i===void 0?!1:i;return n.reduce(function(l,g,p){var f=g.type,w=g.value;return p===0&&e?f==="minusSign"?[w,e]:f==="currency"?P(P([],l),[e]):[e,w]:f==="currency"?e?l:P(P([],l),[w]):f==="group"?s?l:P(P([],l),[t!==void 0?t:w]):f==="decimal"?a!==void 0&&a===0?l:P(P([],l),[r!==void 0?r:w]):f==="fraction"?P(P([],l),[a!==void 0?w.slice(0,a):w]):P(P([],l),[w])},[""]).join("")},Dt={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},Mt=function(n){var o=n||{},e=o.locale,t=o.currency,r=e?new Intl.NumberFormat(e,t?{currency:t,style:"currency"}:void 0):new Intl.NumberFormat;return r.formatToParts(1000.1).reduce(function(a,i,s){return i.type==="currency"?s===0?S(S({},a),{currencySymbol:i.value,prefix:i.value}):S(S({},a),{currencySymbol:i.value,suffix:i.value}):i.type==="group"?S(S({},a),{groupSeparator:i.value}):i.type==="decimal"?S(S({},a),{decimalSeparator:i.value}):a},Dt)},je=function(n){return RegExp(/\d/,"gi").test(n)},Tt=function(n,o,e){if(o===void 0&&(o="."),e===void 0||n===""||n===void 0)return n;if(!n.match(/\d/g))return"";var t=n.split(o),r=t[0],a=t[1];if(e===0)return r;var i=a||"";if(i.length<e)for(;i.length<e;)i+="0";else i=i.slice(0,e);return""+r+o+i},Rt=function(n){var o=n.selectionStart,e=n.value,t=n.lastKeyStroke,r=n.stateValue,a=n.groupSeparator,i=o,s=e;if(r&&i){var l=e.split("");return t==="Backspace"&&r[i]===a&&(l.splice(i-1,1),i-=1),t==="Delete"&&r[i]===a&&(l.splice(i,1),i+=1),s=l.join(""),{modifiedValue:s,cursorPosition:i}}return{modifiedValue:s,cursorPosition:o}},Fe=h.forwardRef(function(n,o){var e=n.allowDecimals,t=e===void 0?!0:e,r=n.allowNegativeValue,a=r===void 0?!0:r,i=n.id,s=n.name,l=n.className,g=n.customInput,p=n.decimalsLimit,f=n.defaultValue,w=n.disabled,M=w===void 0?!1:w,x=n.maxLength,v=n.value,E=n.onValueChange,m=n.fixedDecimalLength,R=n.placeholder,z=n.decimalScale,q=n.prefix,K=n.suffix,$=n.intlConfig,V=n.step,ie=n.min,H=n.max,J=n.disableGroupSeparators,W=J===void 0?!1:J,Q=n.disableAbbreviations,se=Q===void 0?!1:Q,X=n.decimalSeparator,Z=n.groupSeparator,le=n.onChange,ee=n.onFocus,te=n.onBlur,fe=n.onKeyDown,N=n.onKeyUp,Y=n.transformRawValue,de=xt(n,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue"]);if(X&&je(X))throw new Error("decimalSeparator cannot be a number");if(Z&&je(Z))throw new Error("groupSeparator cannot be a number");var ne=h.useMemo(function(){return Mt($)},[$]),O=X||ne.decimalSeparator||"",B=Z||ne.groupSeparator||"";if(O&&B&&O===B&&W===!1)throw new Error("decimalSeparator cannot be the same as groupSeparator");var re={decimalSeparator:O,groupSeparator:B,disableGroupSeparators:W,intlConfig:$,prefix:q||ne.prefix,suffix:K},ue={decimalSeparator:O,groupSeparator:B,allowDecimals:t,decimalsLimit:p||m||2,allowNegativeValue:a,disableAbbreviations:se,prefix:q||ne.prefix,transformRawValue:Y},u=f!=null?be(S(S({},re),{decimalScale:z,value:String(f)})):v!=null?be(S(S({},re),{decimalScale:z,value:String(v)})):"",d=h.useState(u),c=d[0],b=d[1],C=h.useState(!1),k=C[0],U=C[1],ae=h.useState(0),me=ae[0],D=ae[1],I=h.useState(0),ve=I[0],Oe=I[1],he=h.useState(null),Le=he[0],Pe=he[1],oe=h.useRef(null);h.useImperativeHandle(o,function(){return oe.current});var De=function(T,A){U(!0);var j=Rt({selectionStart:A,value:T,lastKeyStroke:Le,stateValue:c,groupSeparator:B}),F=j.modifiedValue,L=j.cursorPosition,_=Ie(S({value:F},ue));if(!(x&&_.replace(/-/g,"").length>x)){if(_===""||_==="-"||_===O){E&&E(void 0,s,{float:null,formatted:"",value:""}),b(_),D(1);return}var xe=O?_.replace(O,"."):_,He=parseFloat(xe),Ee=be(S({value:_},re));if(L!=null){var Se=L+(Ee.length-T.length);Se=Se<=0?q?q.length:0:Se,D(Se),Oe(ve+1)}if(b(Ee),E){var We={float:He,formatted:Ee,value:_};E(_,s,We)}}},Ke=function(T){var A=T.target,j=A.value,F=A.selectionStart;De(j,F),le&&le(T)},_e=function(T){return ee&&ee(T),c?c.length:0},$e=function(T){var A=T.target.value,j=Ie(S({value:A},ue));if(j==="-"||j===O||!j){b(""),te&&te(T);return}var F=Ct(j,O,m),L=Tt(F,O,z!==void 0?z:m),_=parseFloat(L.replace(O,".")),xe=be(S(S({},re),{value:L}));E&&E(L,s,{float:_,formatted:xe,value:L}),b(xe),te&&te(T)},Be=function(T){var A=T.key;if(Pe(A),V&&(A==="ArrowUp"||A==="ArrowDown")){T.preventDefault(),D(c.length);var j=parseFloat(v!=null?String(v).replace(O,"."):Ie(S({value:c},ue)))||0,F=A==="ArrowUp"?j+V:j-V;if(ie!==void 0&&F<ie||H!==void 0&&F>H)return;var L=String(V).includes(".")?Number(String(V).split(".")[1].length):void 0;De(String(L?F.toFixed(L):F).replace(".",O))}fe&&fe(T)},Ue=function(T){var A=T.key,j=T.currentTarget.selectionStart;if(A!=="ArrowUp"&&A!=="ArrowDown"&&c!=="-"){var F=Ae(c,{groupSeparator:B,decimalSeparator:O});if(F&&j&&j>c.length-F.length&&oe.current){var L=c.length-F.length;oe.current.setSelectionRange(L,L)}}N&&N(T)};h.useEffect(function(){k&&c!=="-"&&oe.current&&document.activeElement===oe.current&&oe.current.setSelectionRange(me,me)},[c,me,oe,k,ve]);var Ge=function(){return v!=null&&c!=="-"&&(!O||c!==O)?be(S(S({},re),{decimalScale:k?void 0:z,value:String(v)})):c},Me=S({type:"text",inputMode:"decimal",id:i,name:s,className:l,onChange:Ke,onBlur:$e,onFocus:_e,onKeyDown:Be,onKeyUp:Ue,placeholder:R,disabled:M,value:Ge(),ref:oe},de);if(g){var qe=g;return ze.createElement(qe,S({},Me))}return ze.createElement("input",S({},Me))});Fe.displayName="CurrencyInput";const Lt=({currency:n,field:o,meta:e})=>{const t=h.useRef(null),r=n.decimal_digits,{control:a}=e;return y.jsx(tt,{control:a,name:o,render:({field:{onChange:i,...s}})=>{var l;return y.jsxs("div",{className:"relative size-full",children:[y.jsx("span",{ref:t,role:"presentation",className:"text-ui-fg-muted txt-compact-small pointer-events-none absolute left-0 top-0 select-none py-2.5 pl-4",children:n.symbol_native}),y.jsx(Fe,{"data-input-field":"true","data-field-id":o,"data-cell-type":ke.EDITABLE,className:"size-full bg-transparent py-2.5 pr-4 text-right outline-none",style:{paddingLeft:(l=t.current)!=null&&l.offsetWidth?`${t.current.offsetWidth+8}px`:"16px"},decimalScale:r,allowDecimals:r>0,onValueChange:(g,p,f)=>{i(f==null?void 0:f.value)},...s})]})}})};export{Lt as C,Ft as D,ke as G};
